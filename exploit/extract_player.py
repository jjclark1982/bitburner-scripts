import base64
import json
from pathlib import Path
import argparse


def main():
    parser = argparse.ArgumentParser()
    parser.add_argument('save_path', type=Path, nargs='?', default='bitburnerSave.json')
    parser.add_argument('player_path', type=Path, nargs='?', default='decodedPlayer.json')
    args = parser.parse_args()

    with args.save_path.open() as f:
        b64_data = f.read()

    json_data = base64.b64decode(b64_data)
    dict_data = json.loads(json_data)
    save_data = dict_data['data']
    PlayerSave = json.loads(save_data['PlayerSave'])

    with args.player_path.open('w') as f:
        json.dump(PlayerSave, f, indent=2)


if __name__ == "__main__":
    main()
